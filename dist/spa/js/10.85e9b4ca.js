(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-dialog",{attrs:{persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.dialog.admin,callback:function(e){t.$set(t.dialog,"admin",e)},expression:"dialog.admin"}},[a("q-card",{staticStyle:{width:"300px"}},[a("q-card-section",{staticClass:"bg-teal text-white"},[a("div",{staticClass:"text-h6 q-ma-md"},[t._v("管理员登录")])]),a("q-card-section",{staticClass:"q-ml-md q-mr-md q-mb-sm q-mt-md"},[a("q-input",{attrs:{outlined:"",dense:"",color:"teal",label:"账号"},model:{value:t.admin.id,callback:function(e){t.$set(t.admin,"id",e)},expression:"admin.id"}}),a("q-input",{staticClass:"q-mt-sm",attrs:{outlined:"",dense:"",color:"teal",label:"密码"},model:{value:t.admin.pwd,callback:function(e){t.$set(t.admin,"pwd",e)},expression:"admin.pwd"}})],1),a("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"}}),a("q-btn",{attrs:{flat:"",label:"登录"},on:{click:function(e){return t.AdminLogin()}}})],1)],1)],1),a("q-dialog",{attrs:{"transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.dialog.shop,callback:function(e){t.$set(t.dialog,"shop",e)},expression:"dialog.shop"}},[a("q-card",{staticClass:"shop-card"},[a("q-img",{attrs:{src:"statics/pic/chicken-salad.jpg"}}),a("q-card-section",[a("div",{staticClass:"no-wrap items-center",staticStyle:{"margin-left":"6px"}},[a("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n            零食盒子 "+t._s(t.$store.state.shop_address)+"\n          ")]),a("div",[t._v("\n            信用分:\n            "),a("q-badge",{attrs:{color:t.$store.state.credit_score>79?"green":"red","text-color":"white",label:t.$store.state.credit_score}})],1)]),a("q-space")],1),a("q-card-section",{staticClass:"q-pt-none"})],1)],1),a("q-dialog",{attrs:{"transition-show":"flip-down","transition-hide":"flip-up"},model:{value:t.dialog.replenishment,callback:function(e){t.$set(t.dialog,"replenishment",e)},expression:"dialog.replenishment"}},[a("q-card",{staticStyle:{width:"300px"}},[a("q-card-section",{staticClass:"bg-teal text-white"},[a("div",{staticClass:"text-h6 q-ma-md"},[t._v("补货申请单")])]),a("q-card-section",{staticClass:"q-ml-md q-mr-md q-mb-sm q-mt-md"},[a("q-list",{staticClass:"rounded-borders",attrs:{padding:""}},[t._l(t.replenishment_info,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{dense:"",clickable:""}},[a("q-item-section",[t._v("\n              "+t._s(e.replenishmentItemName)+" * "+t._s(e.replenishmentItemNum)+"\n            ")]),a("q-item-section",{attrs:{side:""}},[t._v("\n              "+t._s(e.replenishmentItemPrice)+"\n            ")])],1)})),a("q-separator"),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-weight-bold",attrs:{dense:"",clickable:""}},[a("q-item-section",[t._v("\n              合计：\n            ")]),a("q-item-section",{attrs:{side:""}},[t._v("\n              "+t._s(t.total)+"\n            ")])],1)],2)],1),a("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"确认"}})],1)],1)],1),a("q-dialog",{attrs:{"full-height":"",position:"right"},model:{value:t.dialog.user_info,callback:function(e){t.$set(t.dialog,"user_info",e)},expression:"dialog.user_info"}},[a("q-card",{staticStyle:{"min-width":"240px",height:"100px"}},[a("q-card-section",{staticClass:"row items-center no-wrap q-ml-sm q-mt-sm q-mb-sm"},[a("q-avatar",{staticClass:"text-center",on:{click:function(e){return t.changeAccount()}}},[a("img",{attrs:{src:t.$store.state.user_info.headimgurl}})]),a("div",{staticClass:"text-subtitle2",staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.$store.state.user_info.nickname))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-list",{staticClass:"rounded-borders",staticStyle:{"max-width":"350px"},attrs:{bordered:"",padding:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.goOrder()}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-icon",{attrs:{name:"mdi-format-list-text",size:"30px",color:"accent"}})],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v("购买记录")])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.Replenishment()}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-icon",{attrs:{name:"mdi-phone",size:"30px",color:"accent"}})],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v("补货申请")])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.pay()}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-icon",{attrs:{name:"mdi-swap-horizontal",size:"30px",color:"accent"}})],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v("申请零食更换")])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-icon",{attrs:{name:"mdi-phone-hangup",size:"30px",color:"accent"}})],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v("反馈")])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"keyboard_arrow_right"}})],1)],1),"0"!=t.$store.state.permission?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:t.active,"active-class":"text-teal"},on:{click:function(e){return t.$router.push("admin_manage")}}},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-icon",{attrs:{color:"teal",name:"mdi-file-table-box-multiple-outline",size:"30px"}})],1),a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v("盒子管理")])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{color:"teal",name:"keyboard_arrow_right"}})],1)],1):t._e()],1)],1)],1),a("q-card",{staticClass:"top-card"},[a("q-img",{staticStyle:{"max-height":"170px"},attrs:{src:"statics/pic/chicken-salad.jpg"}}),a("q-card-section",[a("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"20px",transform:"translateY(-50%)"},attrs:{round:""}},[a("q-avatar",{attrs:{size:"80px"},on:{click:function(e){t.dialog.user_info=!0}}},[a("img",{attrs:{src:t.$store.state.user_info.headimgurl}})])],1),a("div",{staticClass:"row no-wrap items-center",on:{click:function(e){t.dialog.shop=!0}}},[a("div",{staticClass:"col text-h6 ellipsis",staticStyle:{"margin-left":"4px"}},[t._v("\n          零食盒子 "+t._s(t.$store.state.shop_address)+"\n        ")])])],1),a("q-separator")],1),a("q-card",{staticClass:"snack-card"},[[a("div",[a("q-splitter",{staticStyle:{height:"100%"},attrs:{limits:[20,20]},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-tabs",{staticClass:"text-secondary",attrs:{vertical:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e){return a("q-tab",t._b({key:e.sortId,attrs:{name:e.sortName,label:e.sortName,icon:"img:"+e.sortPhotoAddress}},"q-tab",e,!1))})),1)]},proxy:!0},{key:"after",fn:function(){return[a("q-tab-panels",{attrs:{animated:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e,i){return a("q-tab-panel",{attrs:{name:e.sortName}},t._l(e.sortPageItem,(function(e){return a("q-card",{staticClass:"item-card pd-top",on:{click:function(a){return t.ItemToCart(e)}}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",{attrs:{side:""}},[a("q-avatar",{attrs:{rounded:"",size:"48px"}},[a("img",{attrs:{src:e.itemPhotoAddress}})])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.itemName))]),a("q-item-label",{attrs:{caption:""}},[t._v("余量："+t._s(e.itemStockCurrent))])],1),a("q-item-section",{attrs:{side:""}},[t._v("\n                      ￥"+t._s(e.itemPrice)+"\n                    ")])],1)],1)})),1)})),1)]},proxy:!0}]),model:{value:t.splitterModel,callback:function(e){t.splitterModel=e},expression:"splitterModel"}})],1)]],2)],1)},s=[],n=a("bc3a"),r=a.n(n);a("1157"),a("0dbc"),a("b7dd"),a("18a0");var o=a("4328"),c={name:"PageIndex",beforeMount:function(){this.items=this.$store.state.items,this.tab=this.$store.state.items[0].sortName},data:function(){return{dialog:{replenishment:!1,shop:!1,user_info:!1,admin:!1},replenishment_info:null,total:null,num:0,time0:"",time4:"",items:null,stars:3,tab:null,admin:{id:"",pwd:""},active:!0,splitterModel:20}},methods:{ItemToCart:function(t){this.$emit("getItem",t)},goOrder:function(){this.$router.push("/order")},pay:function(){},Replenishment:function(){var t=this;r.a.post(t.$store.state.url_paths.replenishment,o.stringify({access_token:t.$store.state.user_info.access_token})).then((function(e){200===e.data.code?(t.dialog.replenishment=!0,t.total=e.data.data.allPrice,t.replenishment_info=e.data.data.info):200!==e.data.code&&t.$q.dialog({title:"".concat(e.data.code,"错误！"),message:"错误信息：".concat(e.data.msg)})})).catch((function(e){t.$q.dialog({title:"网络错误",message:"错误信息：".concat(e)})}))},AdminLogin:function(){var t=this;r.a.post(t.$store.state.url_paths.bindPermission,o.stringify({access_token:t.$store.state.user_info.access_token,userLogin:t.admin.id,userPassword:t.admin.pwd})).then((function(e){200===e.data.code?(t.$q.notify("登录成功"),t.dialog.admin=!1):200!==e.data.code&&t.$q.dialog({title:"".concat(e.data.code,"错误！"),message:"错误信息：".concat(e.data.msg)})})).catch((function(e){t.$q.dialog({title:"网络错误",message:"错误信息：".concat(e)})}))},changeAccount:function(){this.num++,1==this.num&&(this.timer0=(new Date).getTime()/1e3),4==this.num&&(this.timer4=(new Date).getTime()/1e3,this.timer4-this.timer0<=3?(this.num=0,this.dialog.admin=!0):this.num=0)}}};var l=c,d=a("4023"),m=a("24e8"),p=a("f09f"),u=a("a370"),q=a("27f9"),h=a("4b7e"),b=a("9c40"),g=a("068f"),f=a("58a8"),v=a("2c91"),_=a("1c1c"),w=a("66e5"),x=a("4074"),k=a("eb85"),C=a("cb32"),$=a("0016"),y=a("0170"),Q=a("8562"),N=a("429b"),S=a("7460"),I=a("adad"),P=a("823b"),z=a("7f67"),A=a("714f"),T=a("b2a3"),j=a.n(T),L=Object(d["a"])(l,i,s,!1,null,null,null);e["default"]=L.exports;j()(L,"components",{QDialog:m["a"],QCard:p["a"],QCardSection:u["a"],QInput:q["a"],QCardActions:h["a"],QBtn:b["a"],QImg:g["a"],QBadge:f["a"],QSpace:v["a"],QList:_["a"],QItem:w["a"],QItemSection:x["a"],QSeparator:k["a"],QAvatar:C["a"],QIcon:$["a"],QItemLabel:y["a"],QSplitter:Q["a"],QTabs:N["a"],QTab:S["a"],QTabPanels:I["a"],QTabPanel:P["a"]}),j()(L,"directives",{ClosePopup:z["a"],Ripple:A["a"]})}}]);