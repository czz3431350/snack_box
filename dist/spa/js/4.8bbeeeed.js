(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{f241:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-page-container",[a("router-view",{on:{getItem:t.getItem}})],1),a("q-footer",{staticClass:"bg-grey-1 text-grey-8",staticStyle:{"z-index":"6001"},attrs:{elevated:""}},[a("q-toolbar",{staticClass:"bg-grey-9 text-white"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",dense:"",icon:"mdi-shopping"},on:{click:function(e){return t.goCart()}}},[a("q-badge",{attrs:{color:"secondary",floating:"",transparent:""}},[t._v("\n          "+t._s(t.cart_item_total)+"\n        ")])],1),a("q-toolbar-title",{on:{click:function(e){return t.goCart()}}},[t._v("￥"+t._s(t.cart_price_total.toFixed(2)))]),a("q-dialog",{attrs:{position:"bottom"},model:{value:t.seamless,callback:function(e){t.seamless=e},expression:"seamless"}},[a("q-card",{staticStyle:{"padding-bottom":"50px"},attrs:{"thumb-style":t.thumbStyle}},[a("q-linear-progress",{attrs:{value:1,size:"2px",color:"secondary"}}),a("q-scroll-area",{style:t.getCartHeight,attrs:{"thumb-style":t.thumbStyle}},[a("q-list",{staticClass:"text-weight-bold",attrs:{bordered:"",separator:""}},t._l(this.$store.state.cart.cart_list,(function(e,o){return a("q-item",{staticStyle:{padding:"0 16px"}},[a("q-item-section",{attrs:{avatar:""}},[t._v("\n                  "+t._s(e.itemName)+"\n                ")]),a("q-item-section",{staticClass:"text-right "},[t._v("\n                  "+t._s((e.itemPrice*e.num).toFixed(2))+"元\n                ")]),a("q-item-section",{attrs:{side:""}},[a("div",[a("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:function(a){return t.itemRemove(e.itemId)}}}),a("span",{staticClass:"text-weight-bold"},[t._v(t._s(e.num))]),a("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:function(a){return t.itemAdd(e.itemId)}}})],1)])],1)})),1)],1)],1)],1),a("span",{staticClass:"text-h6",on:{click:function(e){return t.buyItems()}}},[t._v("去付款")]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"chevron_right"},on:{click:function(e){return t.buyItems()}}})],1)],1)],1)},s=[],r=a("bc3a"),n=a.n(r),i=a("4328"),c={name:"MyLayout",computed:{cart_item_total:function(){return this.$store.state.cart.cart_item_total},cart_price_total:function(){return this.$store.state.cart.cart_price_total},thumbStyle:function(){return{right:"2px",borderRadius:"5px",backgroundColor:"#ff7d00",width:"5px",opacity:.75}},getCartHeight:function(){var t=this;return t.$store.state.cart.cart_list.length<4?"height:".concat(48*t.$store.state.cart.cart_list.length,"px"):"height:192px"}},data:function(){return{seamless:!1}},methods:{getItem:function(t){var e=this;e.$store.commit("addItemToCart",t)},itemAdd:function(t){this.$store.commit("item_add",t)},itemRemove:function(t){1===this.$store.state.cart_item_total&&(this.seamless=!1),this.$store.commit("item_remove",t)},goCart:function(){0!==this.$store.state.cart_item_total&&(this.seamless=!0)},buyItems:function(){var t=this;console.log(t.$store.state.cart),n.a.post(t.$store.state.url_paths.buyItems,i.stringify({itemJson:JSON.stringify(t.$store.state.cart),access_token:t.$store.state.user_info.access_token,shop_id:t.$store.state.shop_id})).then((function(e){console.log(e);var a=e.data.appId,o=e.data.timeStamp,s=e.data.nonceStr,r=e.data.package,n=e.data.signType,i=e.data.paySign;alert("appId:".concat(a," ")+"timeStamp:".concat(o," ")+"nonceStr:".concat(s," ")+"package:".concat(r," ")+"signType:".concat(n," ")+"paySign:".concat(i," ")),WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a,timeStamp:o,nonceStr:s,package:r,signType:n,paySign:i},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?t.$q.notify({type:"negative",color:"green",position:"top",message:"支付成功"}):"get_brand_wcpay_request:cancel"==e.err_msg?t.$q.notify({type:"negative",color:"red",position:"top",message:"支付取消"}):"get_brand_wcpay_request:fail"==e.err_msg&&(t.$q.notify({type:"negative",color:"red",position:"top",message:"支付失败"}),alert(JSON.stringify(e)),WeixinJSBridge.call("closeWindow"))}))}))}}},l=c,m=a("4023"),d=a("4d5a"),u=a("09e3"),g=a("7ff0"),p=a("65c6"),_=a("9c40"),f=a("58a8"),h=a("6ac5"),y=a("24e8"),b=a("f09f"),v=a("6b1d"),q=a("4983"),x=a("1c1c"),S=a("66e5"),$=a("4074"),k=a("b2a3"),C=a.n(k),w=Object(m["a"])(l,o,s,!1,null,null,null);e["default"]=w.exports;C()(w,"components",{QLayout:d["a"],QPageContainer:u["a"],QFooter:g["a"],QToolbar:p["a"],QBtn:_["a"],QBadge:f["a"],QToolbarTitle:h["a"],QDialog:y["a"],QCard:b["a"],QLinearProgress:v["a"],QScrollArea:q["a"],QList:x["a"],QItem:S["a"],QItemSection:$["a"]})}}]);